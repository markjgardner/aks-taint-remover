on:
  push:
    branches:
    - main
    # for workflow dev
    - github
env:
  ACR_BASE_URI: mjgcontainers.azurecr.io
  VERSION: "0.4"
jobs:
  test:    
    runs-on: ubuntu-latest
    env:
      FULL_IMAGE_NAME: "$ACR_BASE_URI/taintremover:$VERSION.$GITHUB_RUN_NUMBER"
    steps:
    - run: echo "Building ${{ env.FULL_IMAGE_NAME }}"

  build-linux-image:
    uses: markjgardner/aks-taint-remover/.github/workflows/template.yml@github
    with:
      baseTag: "6.0-alpine"
      runner: ubuntu-latest
#  build-windows2019-image:
#    uses: markjgardner/aks-taint-remover/.github/workflows/template.yml@github
#    with:
#      registryName: "$ACR_BASE_URI"
#      version: "$VERSION"
#      baseTag: "6.0-nanoserver-1809"
#      runner: windows-2019
#  build-windows2022-image:
#    uses: markjgardner/aks-taint-remover/.github/workflows/template.yml@github
#    with:
#      registryName: "$ACR_BASE_URI"
#      version: "$VERSION"
#      baseTag: "6.0-nanoserver-ltsc2022"
#      runner: windows-2022